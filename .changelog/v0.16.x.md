# Release v0.16.x - Changelog

Released: YYYY-MM-DD

## Overview

Agent persistence and reliability improvements.

## Fixes

### Agent history now persists across state resets
- **Completed agents no longer disappear** -- previously, all agent history was stored only in `state.json`; if the state file was reset or corrupted, all completed agents vanished from the UI despite metadata files existing on disk
- **Added disk-backed agent cache** -- `getAgents()` now merges in-memory state (running agents) with persisted metadata files from `data/cos/agents/{id}/metadata.json`, so completed agents always survive state resets
- **Lazy-loaded cache** with ~1987 historical agents loaded on first access and kept in sync as agents complete
- **`getAgent()` falls back to disk** -- individual agent lookups now check the cache when not found in state
- **`deleteAgent()` now cleans up disk files** -- previously only removed from state, leaving orphaned metadata directories; now removes the agent directory entirely
- **`clearCompletedAgents()` now cleans up disk files** -- previously only cleared state, leaving metadata files that would reappear on next cache load; now removes all completed agent directories
